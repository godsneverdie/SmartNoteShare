<div id="uploadbox">
  <form action="/upload" method="POST" id="upload-form" enctype="multipart/form-data">
    <h2>Upload File</h2>
    <label for="uniname">University:</label>
    <select name="uniname" id="uniname" required>
      <option value="">Select University</option>
      <option value="GEU">Graphic Era (Deemed to be University)</option>
      <option value="GEHU">Graphic Era Hill University</option>
      <option value="other">Other</option>
    </select>
    <br><br>
    
    <label for="course">Course:</label>
    <select name="course" id="course" required>
      <option value="">Select Course</option>
      <option value="BCA">BCA</option>
      <option value="BSc IT">BSc IT</option>
      <option value="BTech">BTech</option>
      <option value="MCA">MCA</option>
      <option value="MTech">MTech</option>
    </select>
    <br><br>
    
    <label for="semester">Semester:</label>
    <select name="semester" id="semester" required>
      <option value="">Select Semester</option>
    </select>
    <br><br>
    
    <label for="subject">Subject:</label>
    <input type="text" name="subject" id="subject" required>
    <br><br>
    
    <label for="file">Select File:</label>
    <input type="file" name="file" id="file" required>
    <br><br>
    
    <button type="submit">Upload</button>
  </form>
</div>

<div id="matrix-background" class="matrix-overlay">
  <div class="ai-matrix-loader">
    <div class="digit">0</div>
    <div class="digit">1</div>
    <div class="digit">0</div>
    <div class="digit">1</div>
    <div class="digit">0</div>
    <div class="digit">1</div>
    <div class="digit">0</div>
    <div class="digit">1</div>
    <div class="digit">0</div>
    <div class="glow"></div>
  </div>
  <div class="loading-text">
    Uploading to Cloud...<br>
    AI Extracting Summary...
  </div>
</div>

<style>
  /* Full Screen Overlay */
  .matrix-overlay {
    display: none;
    position: fixed;
    top: 0; left: 0; width: 100%; height: 100%;
    background: rgba(0, 0, 0, 0.85);
    z-index: 9999;
    flex-direction: column;
    justify-content: center;
    align-items: center;
  }

  /* Loader Grid */
  .ai-matrix-loader {
    display: grid;
    grid-template-columns: repeat(3, 1fr); /* Forces 3 columns */
    gap: 5px;
    width: 120px;
    height: 160px;
    position: relative;
  }

  .digit {
    color: #00ff88;
    font-family: monospace;
    font-size: 24px;
    text-align: center;
    animation: matrix-fall 2s infinite;
  }

  .loading-text {
    margin-top: 25px;
    color: #00ff88;
    font-family: monospace;
    font-size: 1.2rem;
    text-align: center;
    line-height: 1.5;
  }

  /* Animations */
  @keyframes matrix-fall {
    0% { transform: translateY(-20px); opacity: 0; }
    20%, 50% { transform: translateY(0); opacity: 1; }
    100% { transform: translateY(20px); opacity: 0; }
  }
  
  /* Delays */
  .digit:nth-child(1) { animation-delay: 0.1s; }
  .digit:nth-child(2) { animation-delay: 0.3s; }
  .digit:nth-child(3) { animation-delay: 0.5s; }
  .digit:nth-child(4) { animation-delay: 0.2s; }
  .digit:nth-child(5) { animation-delay: 0.4s; }
  .digit:nth-child(6) { animation-delay: 0.6s; }
  .digit:nth-child(7) { animation-delay: 0.1s; }
  .digit:nth-child(8) { animation-delay: 0.3s; }
</style>

<script>
  // 1. Semester Logic
  const courseSelect = document.getElementById('course');
  const semesterSelect = document.getElementById('semester');
  const semesterOptions = {
    "BCA": [1, 2, 3, 4, 5, 6],
    "BSc IT": [1, 2, 3, 4, 5, 6],
    "BTech": [1, 2, 3, 4, 5, 6, 7, 8],
    "MCA": [1, 2, 3, 4],
    "MTech": [1, 2, 3, 4]
  };

  courseSelect.addEventListener('change', function() {
    const selectedCourse = this.value;
    semesterSelect.innerHTML = '<option value="">Select Semester</option>'; // Reset
    
    if (selectedCourse && semesterOptions[selectedCourse]) {
      semesterOptions[selectedCourse].forEach(sem => {
        const option = document.createElement('option');
        option.value = sem;
        option.textContent = sem;
        semesterSelect.appendChild(option);
      });
    }
  });

  // 2. Loader Logic
  const uploadForm = document.getElementById('upload-form');
  const loaderOverlay = document.getElementById('matrix-background');

  uploadForm.addEventListener('submit', function(e) {
    // Show loader immediately on submit
    loaderOverlay.style.display = 'flex';
  });
</script>